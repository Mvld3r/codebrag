<div class="user-profile popup-page opened" id="user-profile-popup">
    <div class="popup-box">
        <div class="popup-content">
            <section class="profile-info" ng-controller="UserProfileCtrl">
                <h1>Your profile</h1>
                <div class="authored-box">
                    <div class="author-box">
                        <user-avatar logged-in-user="true"></user-avatar>
                    </div>
                    <div class="info-box">
                        <form name="userForm">
                            <div><input name="fullname" ng-model="user.fullName" ng-required="true"/><a href="" ng-show="userForm.fullname.$dirty && userForm.fullname.$valid" ng-click="saveFullName(user)">(save)</a></div>
                        </form>
                        <div><strong>{{user.login}}</strong></div>
                        <div><strong>{{user.email}}</strong></div>
                    </div>
                </div>
                <aside class="info-line">Codebrag uses <a href="http://gravatar.com" target="_blank">Gravatar</a> for your profile picture.</aside>
            </section>
            <section class="aliases-info" ng-controller="EmailAliasesCtrl">
                <h1>Your email aliases
                    <div class="info-line">&nbsp;
                        <span class="text-error" ng-repeat="f in flash.get('error')">{{ f.message }}</span>
                        <span class="success" ng-repeat="f in flash.get('info')">{{ f.message }}</span>
                    </div>
                </h1>
                <ul>
                    <li ng-hide="aliases && aliases.length">You have no email aliases defined</li>
                    <li ng-repeat="a in aliases">{{ a.alias }} <span><a href="" ng-click="deleteAlias(a)">(delete)</a></span></li>
                </ul>
                <a href="" ng-click="openAddAliasPopup()">Define alias</a>
            </section>

            <section class="settings-info" ng-show="userSettings" ng-controller="UserSettingsCtrl">
                <h1>Your settings
                    <div class="info-line">&nbsp;
                        <div class="info-line">&nbsp;
                            <span class="text-error" ng-repeat="f in flash.get('error')">{{ f.message }}</span>
                            <span class="success" ng-repeat="f in flash.get('info')">{{ f.message }}</span>
                        </div>
                    </div>
                </h1>
                <form class="param clearfix">
                    <p class="clearfix">
                        <label >
                            Smart email notifications <a href="https://github.com/softwaremill/codebrag/wiki/FAQ#email-notifications" target="_blank">(learn more)</a>
                            <input ng-disabled="actionPending" type="checkbox" ng-model="userSettings.emailNotificationsEnabled" ng-change="notificationsChanged()"/>
                        </label>
                    </p>
                    <p class="clearfix">
                        <label >
                            Daily update emails
                            <input ng-disabled="actionPending" type="checkbox" ng-model="userSettings.dailyUpdatesEmailEnabled" ng-change="notificationsChanged()"/>
                        </label>
                    </p>
                </form>
            </section>
        </div>
        <span class="close-btn" ng-click="closePopup()">
            <i class="icon-remove"></i>
        </span>
    </div>
</div>